# 飯メガネ (Meshi Megane) 仕様書

カメラをかざすだけで、直感的に「そこのお店」の情報がわかるARグルメナビゲーションアプリ。

## 1. 概要
- 名称：飯メガネ (Meshi Megane)
- プラットフォーム：iOS / Android (React Native + Expo)
- 目的：AR技術を用いて、ユーザーの周囲にある飲食店情報を視覚的に提供する。

## 2. 主要機能

### 2.1 ユーザー認証
- **匿名ログイン**: アプリ起動時に Firebase Authentication を使用して自動的に匿名ログインを行い、即座に利用可能にする。

### 2.2 AR表示 (メイン画面)
- **カメラプレビュー**: 全画面でのカメラ映像表示。
- **ARパネルの配置**:
    - デバイスのGPS（位置情報）とコンパス（方位）を同期し、店舗の方向にパネルを表示。
    - **高さ（垂直位置）の制御**: 住所文字列から「○階」「○F」情報を抽出し、高度に反映。情報がない場合は1階として地上付近に表示。
    - **チラ見せ制御**: 遠くの店舗や画面端の店舗は不透明度を下げ、視覚的なノイズを軽減。
    - **センサー平滑化**: ローパスフィルターとデッドゾーン（0.5度以内の揺れは無視）を導入し、パネルの荒ぶりを抑制。

### 2.3 検索・絞り込み
- **ジャンル**: すべて、和食、洋食、カフェなど。
- **距離**: 300m, 500m, 1km, 2km, 3km。
- **営業状況**: 「現在営業中」の店舗のみ表示するフィルタ。
- **評価（Rating）**:
    - APIから評価が取得できない店舗は「評価なし」として扱う。
    - 「評価なし店舗を含めるか」のON/OFF切り替え。
- **ズームフィルタ**: カメラズーム（将来実装）および近距離店舗（200m以内）の表示制御。

### 2.4 店舗詳細
- ARパネルタップにより、店名、サムネイル、キャッチコピー、営業時間、住所、評価を表示するモーダルを起動。

## 3. 技術スタック
- **Frontend**: React Native, Expo
- **Language**: TypeScript
- **UI Components**: Vanilla StyleSheet, FontAwesome Icons
- **Sensors**: `expo-camera`, `expo-location`, `expo-sensors`
- **Backend**: Firebase Auth, Firebase Firestore (予定)
- **Persistent Data**: `@react-native-async-storage/async-storage`

## 4. 開発時の特記事項
- 初期フェーズでは `src/assets/data/dummyShops.json` のダミーデータを使用する。
- API連携（ホットペッパーグルメAPI等）は、APIキー取得後に実装する。
- センサーの精度はデバイス環境に依存するため、常に誤差を許容する設計とする。
- 歩きスマホ防止のため、移動速度が一定以上の場合の警告表示を将来検討する。
